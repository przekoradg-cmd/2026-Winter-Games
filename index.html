<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026 Winter Olympics Tracker</title>
    <style>
        :root {
            --bg: #f4f7f6;
            --card: #ffffff;
            --primary: #0081C8; /* Olympic Blue */
            --gold: #FFD700;
            --silver: #C0C0C0;
            --bronze: #CD7F32;
        }

        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; background: var(--bg); margin: 0; padding: 20px; color: #333; }
        .container { max-width: 600px; margin: 0 auto; }
        h1 { text-align: center; color: var(--primary); margin-bottom: 30px; }
        
        .leaderboard { background: #333; color: white; border-radius: 12px; padding: 20px; margin-bottom: 30px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); position: relative; }
        .leaderboard h2 { margin-top: 0; font-size: 1.2rem; text-transform: uppercase; letter-spacing: 1px; color: var(--gold); }
        .last-updated { font-size: 0.75rem; color: #aaa; margin-bottom: 15px; display: block; }
        
        .leader-item { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #444; }
        .leader-item:last-child { border-bottom: none; }
        .leader-item.first { font-weight: bold; font-size: 1.2rem; color: var(--gold); }

        .team-card { background: var(--card); border-radius: 12px; padding: 15px; margin-bottom: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
        .team-header { display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid var(--bg); padding-bottom: 10px; margin-bottom: 10px; }
        .team-name { font-size: 1.4rem; font-weight: 800; }
        .team-total { background: var(--primary); color: white; padding: 4px 12px; border-radius: 20px; font-weight: bold; }

        .country-row { display: flex; align-items: center; padding: 8px 0; }
        .flag { font-size: 1.5rem; margin-right: 12px; }
        .country-name { flex-grow: 1; font-weight: 500; }
        .medal-counts { display: flex; gap: 10px; }
        .medal { display: flex; align-items: center; gap: 4px; font-weight: bold; }
    </style>
</head>
<body>

<div class="container">
    <h1>üèîÔ∏è 2026 Winter Games</h1>

    <div class="leaderboard">
        <h2>üèÜ Leaderboard</h2>
        <span id="update-time" class="last-updated">Checking for updates...</span>
        <div id="leaderboard-content">Loading live standings...</div>
    </div>

    <div id="teams-container"></div>
</div>

<script>
    const teams = [
        { name: "Team DiRezze", countries: ["USA", "China", "Finland"] },
        { name: "Team Przekora", countries: ["Norway", "Switzerland", "Austria"] },
        { name: "Team Farner", countries: ["Canada", "Japan", "France"] },
        { name: "Team Diehl", countries: ["Italy", "Germany", "Sweden"] }
    ];

    const countryData = {
        "USA": { flag: "üá∫üá∏" }, "China": { flag: "üá®üá≥" }, "Finland": { flag: "üá´üáÆ" },
        "Norway": { flag: "üá≥üá¥" }, "Switzerland": { flag: "üá®üá≠" }, "Austria": { flag: "üá¶üáπ" },
        "Canada": { flag: "üá®üá¶" }, "Japan": { flag: "üáØüáµ" }, "France": { flag: "üá´üá∑" },
        "Italy": { flag: "üáÆüáπ" }, "Germany": { flag: "üá©üá™" }, "Sweden": { flag: "üá∏üá™" }
    };

    async function fetchMedalData() {
        try {
            const response = await fetch("https://en.wikipedia.org/api/rest_v1/page/mobile-sections/2026_Winter_Olympics_medal_table");
            const json = await response.json();
            const html = json.remaining.sections[0].text;
            const parser = new DOMParser();
            const doc = parser.parseFromString(html, 'text/html');
            const rows = doc.querySelectorAll('tr');
            
            let counts = {};
            rows.forEach(row => {
                const header = row.querySelector('th');
                const cols = row.querySelectorAll('td');
                if (header && cols.length >= 3) {
                    const countryName = header.textContent.trim().replace(/\*/g, '').replace('United States', 'USA');
                    counts[countryName] = {
                        g: parseInt(cols[0].textContent) || 0,
                        s: parseInt(cols[1].textContent) || 0,
                        b: parseInt(cols[2].textContent) || 0
                    };
                }
            });
            return counts;
        } catch (e) {
            console.error("Wikipedia fetch failed, using fallback data.");
            return {
                "Norway": {g:3, s:1, b:2}, "USA": {g:2, s:0, b:0}, "Italy": {g:1, s:2, b:6},
                "Japan": {g:1, s:2, b:1}, "Austria": {g:1, s:2, b:0}, "Germany": {g:1, s:1, b:1},
                "Sweden": {g:1, s:1, b:0}, "France": {g:1, s:1, b:0}, "Switzerland": {g:1, s:0, b:0},
                "Canada": {g:0, s:0, b:1}, "China": {g:0, s:0, b:1}, "Finland": {g:0, s:0, b:0}
            };
        }
    }

    function updateTimestamp() {
        const now = new Date();
        const timeString = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: true });
        document.getElementById('update-time').innerText = `Last Updated: ${timeString}`;
    }

    async function render() {
        const data = await fetchMedalData();
        
        const teamScores = teams.map(team => {
            let total = 0;
            let breakdown = team.countries.map(name => {
                const m = data[name] || {g:0, s:0, b:0};
                const sum = m.g + m.s + m.b;
                total += sum;
                return { name, ...m, total: sum };
            });
            return { ...team, total, breakdown };
        });

        const sortedTeams = [...teamScores].sort((a, b) => b.total - a.total);

        document.getElementById('leaderboard-content').innerHTML = sortedTeams.map((t, i) => `
